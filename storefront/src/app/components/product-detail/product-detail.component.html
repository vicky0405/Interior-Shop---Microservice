<div class="max-w-7xl mx-auto px-4 py-8" *ngIf="product">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
    <div class="flex flex-col gap-4">
      <div class="aspect-[4/3] bg-gray-100 rounded-lg overflow-hidden border border-slate-200">
        <img
          [src]="currentMainImage"
          class="w-full h-full object-cover object-center"
          alt="Main Image"
        />
      </div>

      <div class="flex gap-4 overflow-x-auto pb-2">
        <div
          *ngFor="let img of currentGallery"
          (click)="currentMainImage = img"
          class="w-20 h-20 flex-shrink-0 rounded-md overflow-hidden cursor-pointer border-2"
          [class.border-primary]="currentMainImage == img"
          [class.border-transparent]="currentMainImage !== img"
        >
          <img [src]="img" class="w-full h-full object-cover" />
        </div>
      </div>
    </div>

    <div>
      <h1 class="text-3xl font-black text-[#0d141b] dark:text-slate-50 mb-2">{{ product.name }}</h1>
      <p class="text-slate-500 mb-6">{{ product.description }}</p>

      <div class="text-4xl font-black text-[#0d141b] dark:text-slate-50 mb-8">
        {{ selectedVariant?.price | currency: 'VND' : 'symbol' : '1.0-0' }}
      </div>

      <div class="mb-8">
        <h3 class="text-sm font-bold uppercase text-slate-500 mb-3">Chọn phiên bản</h3>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <div
            *ngFor="let v of product.variants"
            (click)="selectVariant(v)"
            class="cursor-pointer border-2 rounded-lg p-3 flex items-center gap-3 transition-all hover:border-slate-400"
            [class.border-primary]="isSelected(v)"
            [class.bg-blue-50]="isSelected(v)"
            [class.border-slate-200]="!isSelected(v)"
          >
            <img
              *ngIf="v.images && v.images.length > 0"
              [src]="v.images[0]"
              class="w-10 h-10 rounded object-cover border border-gray-200"
            />

            <div
              *ngIf="!v.images || v.images.length === 0"
              class="w-10 h-10 rounded bg-gray-200 flex items-center justify-center text-xs text-gray-500"
            >
              No img
            </div>

            <div>
              <p class="font-bold text-sm">
                {{ v.attributes?.['color'] }} - {{ v.attributes?.['material'] }}
              </p>
              <p class="text-xs text-slate-500">{{ v.width }}cm x {{ v.depth }}cm</p>
            </div>
          </div>
        </div>
      </div>

      <button
        (click)="addToCart()"
        class="w-full bg-primary hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-lg flex items-center justify-center gap-2 transition-transform active:scale-95"
      >
        <span class="material-symbols-outlined">shopping_cart</span>
        Thêm vào giỏ hàng
      </button>

      <div class="mt-12 border-t pt-8">
        <h3 class="font-bold text-lg mb-4">Kích thước sản phẩm</h3>
        <dl class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <dt class="text-slate-500">Chiều rộng</dt>
            <dd class="font-bold">{{ selectedVariant?.width }} cm</dd>
          </div>
          <div>
            <dt class="text-slate-500">Chiều sâu</dt>
            <dd class="font-bold">{{ selectedVariant?.depth }} cm</dd>
          </div>
          <div>
            <dt class="text-slate-500">Chiều cao</dt>
            <dd class="font-bold">{{ selectedVariant?.height }} cm</dd>
          </div>
          <div>
            <dt class="text-slate-500">Cân nặng</dt>
            <dd class="font-bold">
              {{ (selectedVariant?.attributes && selectedVariant?.attributes['weight']) || 'N/A' }}
              kg
            </dd>
          </div>
        </dl>
      </div>
    </div>
  </div>
</div>
